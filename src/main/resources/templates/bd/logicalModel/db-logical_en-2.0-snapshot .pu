@startuml relational_view

/'{
    # PRIMARY KEY
    ~ UNIQUE (NULLABLE)
    + NOT NULL
    - NULLABLE
}'/

entity "Person" as Person {
    #ID_Persona: INT
    +Nombre: VARCHAR[100]
    +Apellido_Paterno: VARCHAR[100]
    +Apellido_Materno: VARCHAR[100]
    -Genero: CHAR[1]
    -Fecha_Nacimiento: DATE
    +Telefono: VARCHAR[15]
    -DNI: VARCHAR[10]
    -Direccion: VARCHAR[255]
    /' Persona representa a la persona base, que puede ser paciente, médico o usuario '/
}

entity "Patient" as Patient {
    #id_patient: INT
    ~id_person: INT
    -antecedents: TEXT
    -alergies: TEXT
    /' Un paciente es una Person, pero con un historial clínico asociado '/
}

entity "Doctor" as Doctor {
    #ID_Medico: INT
    #ID_Persona: INT
    -Especialidad: VARCHAR[100]
    /' El médico es una persona con una especialidad profesional '/
}

entity "User" as User {
    #ID_User: INT
    ~ID_Persona: INT
    +Username: VARCHAR[50]
    +Password: VARCHAR[255]
    -Rol: VARCHAR[50]
    /' User representa la información de los usuarios del sistema, con roles definidos '/
}

entity "Consultation" as Consultation {
    #ID_Consulta: INT
    +Fecha_Consulta: DATETIME
    #ID_Persona: INT
    -Motivo: TEXT
    -Detalles: TEXT
    /' La consulta es realizada por una persona (puede ser un paciente o no), y contiene detalles '/
}

entity "VitalSigns" as VitalSings {
    #ID_SignoVital: INT
    #ID_HistorialClinico: INT
    +Fecha_Medicion: DATETIME
    -Presion_Arterial: VARCHAR[10]
    -Frecuencia_Cardiaca: INT
    -Temperatura: DECIMAL[5,2]
    -Frecuencia_Respiratoria: INT
    /' Signos vitales registrados durante una consulta, asociados al historial clínico '/
}

entity "Medical_History" as Medical_History {
    #id_history: INT
    +creation_date: DATE
    -observations: TEXT
    ~id_patient: INT
    /' El historial clínico se crea para cada paciente y contiene datos médicos relevantes '/
}

entity "Clinical_Exam" as Clinical_Exam {
    #ID_Examen: INT
    #ID_HistorialClinico: INT
    +Tipo_Examen: VARCHAR[100] /' "Estomatológico" o "General" '/
    +Fecha_Examen: DATE
    -Hallazgos: TEXT
    -Recomendaciones: TEXT
    /' Los exámenes clínicos, como estomatológicos o generales, se registran aquí '/
}

'entity "Odontograma" as Odontogram {
'    #ID_Odontograma: INT
'    #ID_HistorialClinico: INT
'    +Fecha_Creacion: DATE
'    -Detalles: TEXT
'    /' El odontograma es el registro de los dientes y su estado, utilizado en la odontología '/
'}

entity "Treatment" as Treatment {
    #ID_Tratamiento: INT
    +Nombre_Tratamiento: VARCHAR[100]
    +Tipo_Tratamiento: VARCHAR[50] /' Tipo de tratamiento: "Estético", "Curativo", "Preventivo", etc. '/
    -Descripcion: TEXT
    -Costo: DECIMAL[10,2]
    /' Registro de los tratamientos disponibles, su nombre, tipo y costo asociado '/
}

entity "Appointment" as Appointment {
    #ID_Cita: INT
    +Fecha_Cita: DATE
    +Fecha_End: Date
    #ID_Paciente: INT
    #ID_Tratamiento: INT
    #ID_Horario: INT
    #ID_Medico: INT
    -Notas: TEXT
    /' Información sobre cada cita médica, incluida la fecha, tratamiento, horario y médico '/
}

entity "Diagnosis" as Diagnosis {
    #ID_Diagnostico: INT
    +Fecha_Diagnostico: DATE
    #ID_HistorialClinico: INT
    +Descripcion: TEXT
    -Recomendaciones: TEXT
    /' Registro de los diagnósticos realizados, asociados al historial clínico '/
}

Person ||--o{ Patient : es
Person ||--o{ Doctor : es
Person ||--o{ User : es
Person ||--o{ Consultation : realiza
Patient ||--|{ Medical_History : tiene
'Odontogram ||--o{ OdontogramaDetalle : tiene
'Medical_History ||--o{ Odontogram : contiene
Medical_History ||--o{ VitalSings : registra
Medical_History ||--o{ Clinical_Exam : incluye

Patient ||--o{ Appointment : asiste a
Doctor ||--o{ Appointment : atiende

Appointment }o--|| Treatment : aplica
Medical_History ||--o{ Diagnosis : contiene

@enduml
